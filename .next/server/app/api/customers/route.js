"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/customers/route";
exports.ids = ["app/api/customers/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustomers%2Froute&page=%2Fapi%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustomers%2Froute.ts&appDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustomers%2Froute&page=%2Fapi%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustomers%2Froute.ts&appDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ewesk_OneDrive_Escritorio_gestor_de_inventario_para_decoraci_n_github_App_web_decoracion_src_app_api_customers_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/customers/route.ts */ \"(rsc)/./src/app/api/customers/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/customers/route\",\n        pathname: \"/api/customers\",\n        filename: \"route\",\n        bundlePath: \"app/api/customers/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ewesk\\\\OneDrive\\\\Escritorio\\\\gestor-de-inventario-para-decoración-github\\\\App-web-decoracion\\\\src\\\\app\\\\api\\\\customers\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ewesk_OneDrive_Escritorio_gestor_de_inventario_para_decoraci_n_github_App_web_decoracion_src_app_api_customers_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/customers/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjdXN0b21lcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmN1c3RvbWVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmN1c3RvbWVycyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNld2VzayU1Q09uZURyaXZlJTVDRXNjcml0b3JpbyU1Q2dlc3Rvci1kZS1pbnZlbnRhcmlvLXBhcmEtZGVjb3JhY2klQzMlQjNuLWdpdGh1YiU1Q0FwcC13ZWItZGVjb3JhY2lvbiU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDZXdlc2slNUNPbmVEcml2ZSU1Q0VzY3JpdG9yaW8lNUNnZXN0b3ItZGUtaW52ZW50YXJpby1wYXJhLWRlY29yYWNpJUMzJUIzbi1naXRodWIlNUNBcHAtd2ViLWRlY29yYWNpb24maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzJGO0FBQ3hLO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VzdG9yLWludmVudGFyaW8tbmV4dGpzLz81M2Y1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGV3ZXNrXFxcXE9uZURyaXZlXFxcXEVzY3JpdG9yaW9cXFxcZ2VzdG9yLWRlLWludmVudGFyaW8tcGFyYS1kZWNvcmFjacOzbi1naXRodWJcXFxcQXBwLXdlYi1kZWNvcmFjaW9uXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGN1c3RvbWVyc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY3VzdG9tZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY3VzdG9tZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jdXN0b21lcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxld2Vza1xcXFxPbmVEcml2ZVxcXFxFc2NyaXRvcmlvXFxcXGdlc3Rvci1kZS1pbnZlbnRhcmlvLXBhcmEtZGVjb3JhY2nDs24tZ2l0aHViXFxcXEFwcC13ZWItZGVjb3JhY2lvblxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxjdXN0b21lcnNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2N1c3RvbWVycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustomers%2Froute&page=%2Fapi%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustomers%2Froute.ts&appDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/customers/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/customers/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_googleSheets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/googleSheets */ \"(rsc)/./src/lib/googleSheets.ts\");\n/* harmony import */ var _lib_validators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/validators */ \"(rsc)/./src/lib/validators.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\n\n\n\n// GET /api/customers - Obtener todos los clientes\nasync function GET() {\n    try {\n        const customers = await (0,_lib_googleSheets__WEBPACK_IMPORTED_MODULE_1__.getCustomersFromSheet)();\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            data: customers\n        });\n    } catch (error) {\n        console.error(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Error al obtener los clientes\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/customers - Crear un nuevo cliente\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const validatedData = _lib_validators__WEBPACK_IMPORTED_MODULE_2__.customerSchema.parse(body);\n        await (0,_lib_googleSheets__WEBPACK_IMPORTED_MODULE_1__.addCustomerToSheet)(validatedData);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Cliente creado exitosamente\"\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(error);\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_3__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Datos inv\\xe1lidos\",\n                errors: error.issues\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Error al crear el cliente\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jdXN0b21lcnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJDO0FBQ29DO0FBQzdCO0FBQ25CO0FBRS9CLGtEQUFrRDtBQUMzQyxlQUFlSztJQUNwQixJQUFJO1FBQ0YsTUFBTUMsWUFBWSxNQUFNTCx3RUFBcUJBO1FBQzdDLE9BQU9ELHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUMsTUFBTUY7UUFBVTtJQUM3QyxFQUFFLE9BQU9HLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDQTtRQUNkLE9BQU9ULHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUksU0FBUztZQUFpQ0YsT0FBTyxNQUFpQkUsT0FBTztRQUFDLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3hIO0FBQ0Y7QUFFQSwrQ0FBK0M7QUFDeEMsZUFBZUMsS0FBS0MsR0FBWTtJQUNyQyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNRCxJQUFJUCxJQUFJO1FBQzNCLE1BQU1TLGdCQUFnQmIsMkRBQWNBLENBQUNjLEtBQUssQ0FBQ0Y7UUFDM0MsTUFBTWIscUVBQWtCQSxDQUFDYztRQUN6QixPQUFPaEIscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUFFSSxTQUFTO1FBQThCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3JGLEVBQUUsT0FBT0gsT0FDUjtRQUNDQyxRQUFRRCxLQUFLLENBQUNBO1FBQ2QsSUFBSUEsaUJBQWlCTCx5Q0FBUUEsRUFBRTtZQUMzQixPQUFPSixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO2dCQUFFSSxTQUFTO2dCQUFtQk8sUUFBUVQsTUFBTVUsTUFBTTtZQUFDLEdBQUc7Z0JBQUVQLFFBQVE7WUFBSTtRQUNqRztRQUNBLE9BQU9aLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUksU0FBUztZQUE2QkYsT0FBTyxNQUFpQkUsT0FBTztRQUFDLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3BIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZXN0b3ItaW52ZW50YXJpby1uZXh0anMvLi9zcmMvYXBwL2FwaS9jdXN0b21lcnMvcm91dGUudHM/Mzg0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGdldEN1c3RvbWVyc0Zyb21TaGVldCwgYWRkQ3VzdG9tZXJUb1NoZWV0IH0gZnJvbSAnQC9saWIvZ29vZ2xlU2hlZXRzJztcclxuaW1wb3J0IHsgY3VzdG9tZXJTY2hlbWEgfSBmcm9tICdAL2xpYi92YWxpZGF0b3JzJztcclxuaW1wb3J0IHsgWm9kRXJyb3IgfSBmcm9tICd6b2QnO1xyXG5cclxuLy8gR0VUIC9hcGkvY3VzdG9tZXJzIC0gT2J0ZW5lciB0b2RvcyBsb3MgY2xpZW50ZXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY3VzdG9tZXJzID0gYXdhaXQgZ2V0Q3VzdG9tZXJzRnJvbVNoZWV0KCk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBkYXRhOiBjdXN0b21lcnMgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGFsIG9idGVuZXIgbG9zIGNsaWVudGVzJywgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUE9TVCAvYXBpL2N1c3RvbWVycyAtIENyZWFyIHVuIG51ZXZvIGNsaWVudGVcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xyXG4gICAgY29uc3QgdmFsaWRhdGVkRGF0YSA9IGN1c3RvbWVyU2NoZW1hLnBhcnNlKGJvZHkpO1xyXG4gICAgYXdhaXQgYWRkQ3VzdG9tZXJUb1NoZWV0KHZhbGlkYXRlZERhdGEpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0NsaWVudGUgY3JlYWRvIGV4aXRvc2FtZW50ZScgfSwgeyBzdGF0dXM6IDIwMSB9KTtcclxuICB9IGNhdGNoIChlcnJvcilcclxuICAge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBab2RFcnJvcikge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdEYXRvcyBpbnbDoWxpZG9zJywgZXJyb3JzOiBlcnJvci5pc3N1ZXMgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBhbCBjcmVhciBlbCBjbGllbnRlJywgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRDdXN0b21lcnNGcm9tU2hlZXQiLCJhZGRDdXN0b21lclRvU2hlZXQiLCJjdXN0b21lclNjaGVtYSIsIlpvZEVycm9yIiwiR0VUIiwiY3VzdG9tZXJzIiwianNvbiIsImRhdGEiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwic3RhdHVzIiwiUE9TVCIsInJlcSIsImJvZHkiLCJ2YWxpZGF0ZWREYXRhIiwicGFyc2UiLCJlcnJvcnMiLCJpc3N1ZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/customers/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/googleSheets.ts":
/*!*********************************!*\
  !*** ./src/lib/googleSheets.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCustomerToSheet: () => (/* binding */ addCustomerToSheet),\n/* harmony export */   addProductToSheet: () => (/* binding */ addProductToSheet),\n/* harmony export */   addSaleToSheet: () => (/* binding */ addSaleToSheet),\n/* harmony export */   deleteCustomerFromSheet: () => (/* binding */ deleteCustomerFromSheet),\n/* harmony export */   deleteProductFromSheet: () => (/* binding */ deleteProductFromSheet),\n/* harmony export */   getCustomersFromSheet: () => (/* binding */ getCustomersFromSheet),\n/* harmony export */   getProductsFromSheet: () => (/* binding */ getProductsFromSheet),\n/* harmony export */   getSalesFromSheet: () => (/* binding */ getSalesFromSheet),\n/* harmony export */   updateCustomerInSheet: () => (/* binding */ updateCustomerInSheet),\n/* harmony export */   updateProductInSheet: () => (/* binding */ updateProductInSheet)\n/* harmony export */ });\n/* harmony import */ var googleapis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! googleapis */ \"(rsc)/./node_modules/googleapis/build/src/index.js\");\n\nif (!process.env.GOOGLE_SHEETS_SPREADSHEET_ID) {\n    throw new Error(\"Falta GOOGLE_SHEETS_SPREADSHEET_ID\");\n}\nif (!process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL) {\n    throw new Error(\"Falta GOOGLE_SERVICE_ACCOUNT_EMAIL\");\n}\nif (!process.env.GOOGLE_PRIVATE_KEY) {\n    throw new Error(\"Falta GOOGLE_PRIVATE_KEY\");\n}\nconst SPREADSHEET_ID = process.env.GOOGLE_SHEETS_SPREADSHEET_ID;\nconst SERVICE_EMAIL = process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL;\nconst PRIVATE_KEY = process.env.GOOGLE_PRIVATE_KEY.replace(/\\\\n/g, \"\\n\");\n// Configuración de la autenticación\nconst auth = new googleapis__WEBPACK_IMPORTED_MODULE_0__.google.auth.GoogleAuth({\n    credentials: {\n        client_email: process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL,\n        private_key: process.env.GOOGLE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\")\n    },\n    scopes: [\n        \"https://www.googleapis.com/auth/spreadsheets\"\n    ]\n});\nconst sheets = googleapis__WEBPACK_IMPORTED_MODULE_0__.google.sheets({\n    version: \"v4\",\n    auth\n});\nconst spreadsheetId = process.env.GOOGLE_SHEETS_SPREADSHEET_ID;\n// Helper para convertir filas de Sheets a objetos\nfunction rowsToObjects(rows, headers) {\n    return rows.map((row)=>{\n        const obj = {};\n        headers.forEach((header, index)=>{\n            obj[header] = row[index];\n        });\n        return obj;\n    });\n}\nasync function getSheetData(range) {\n    const response = await sheets.spreadsheets.values.get({\n        spreadsheetId,\n        range\n    });\n    return response.data.values || [];\n}\nasync function findRowIndex(sheetName, id) {\n    const ids = (await getSheetData(`${sheetName}!A2:A`)).flat();\n    const rowIndex = ids.indexOf(id);\n    if (rowIndex === -1) throw new Error(`ID no encontrado en la hoja ${sheetName}: ${id}`);\n    return rowIndex + 2; // +2 porque es 1-based y la data empieza en la fila 2\n}\nasync function findRowIndexBySku(sku) {\n    const skus = (await getSheetData(\"products!B2:B\")).flat();\n    const rowIndex = skus.findIndex((s)=>s.toLowerCase() === sku.toLowerCase());\n    if (rowIndex === -1) throw new Error(`SKU no encontrado: ${sku}`);\n    return rowIndex + 2;\n}\n// Helper para obtener el sheetId por nombre, necesario para borrar filas\nasync function getSheetIdByName(sheetName) {\n    const response = await sheets.spreadsheets.get({\n        spreadsheetId\n    });\n    const sheet = response.data.sheets?.find((s)=>s.properties?.title === sheetName);\n    return sheet?.properties?.sheetId ?? null;\n}\n// --- API de Productos ---\nconst PRODUCT_HEADERS = [\n    \"id\",\n    \"sku\",\n    \"name\",\n    \"category\",\n    \"tags\",\n    \"description\",\n    \"image_url\",\n    \"supplier\",\n    \"cost\",\n    \"price\",\n    \"stock\",\n    \"reorder_level\",\n    \"location\",\n    \"created_at\",\n    \"updated_at\"\n];\nconst PRODUCTS_RANGE = \"products!A2:O\";\nasync function getProductsFromSheet() {\n    const rows = await getSheetData(PRODUCTS_RANGE);\n    return rowsToObjects(rows, PRODUCT_HEADERS).map((p)=>({\n            ...p,\n            cost: parseFloat(p.cost) || 0,\n            price: parseFloat(p.price) || 0,\n            stock: parseInt(p.stock, 10) || 0,\n            reorder_level: parseInt(p.reorder_level, 10) || 0\n        }));\n}\nasync function addProductToSheet(product) {\n    const newId = `prod_${new Date().getTime()}`;\n    const timestamp = new Date().toISOString();\n    const newRow = [\n        newId,\n        product.sku,\n        product.name,\n        product.category,\n        product.tags,\n        product.description,\n        product.image_url,\n        product.supplier,\n        product.cost,\n        product.price,\n        product.stock,\n        product.reorder_level,\n        product.location,\n        timestamp,\n        timestamp\n    ];\n    await sheets.spreadsheets.values.append({\n        spreadsheetId,\n        range: \"products!A:A\",\n        valueInputOption: \"USER_ENTERED\",\n        requestBody: {\n            values: [\n                newRow\n            ]\n        }\n    });\n}\nasync function updateProductInSheet(id, updates) {\n    const rowIndex = await findRowIndex(\"products\", id);\n    const existingData = (await getSheetData(`products!A${rowIndex}:O${rowIndex}`))[0];\n    const updatedRow = PRODUCT_HEADERS.map((header, index)=>{\n        return header in updates ? updates[header] : existingData[index];\n    });\n    // Actualizar `updated_at`\n    const updatedAtIndex = PRODUCT_HEADERS.indexOf(\"updated_at\");\n    updatedRow[updatedAtIndex] = new Date().toISOString();\n    await sheets.spreadsheets.values.update({\n        spreadsheetId,\n        range: `products!A${rowIndex}`,\n        valueInputOption: \"USER_ENTERED\",\n        requestBody: {\n            values: [\n                updatedRow\n            ]\n        }\n    });\n}\nasync function deleteProductFromSheet(id) {\n    const sheetId = await getSheetIdByName(\"products\");\n    if (sheetId === null) throw new Error(\"Hoja 'products' no encontrada.\");\n    const rowIndex = await findRowIndex(\"products\", id);\n    await sheets.spreadsheets.batchUpdate({\n        spreadsheetId,\n        requestBody: {\n            requests: [\n                {\n                    deleteDimension: {\n                        range: {\n                            sheetId: sheetId,\n                            dimension: \"ROWS\",\n                            startIndex: rowIndex - 1,\n                            endIndex: rowIndex\n                        }\n                    }\n                }\n            ]\n        }\n    });\n}\n// --- API de Clientes ---\nconst CUSTOMER_HEADERS = [\n    \"id\",\n    \"name\",\n    \"email\",\n    \"phone\",\n    \"address\",\n    \"notes\",\n    \"created_at\",\n    \"updated_at\"\n];\nconst CUSTOMERS_RANGE = \"customers!A2:H\";\nasync function getCustomersFromSheet() {\n    const rows = await getSheetData(CUSTOMERS_RANGE);\n    return rowsToObjects(rows, CUSTOMER_HEADERS);\n}\nasync function addCustomerToSheet(customer) {\n    const newId = `cust_${new Date().getTime()}`;\n    const timestamp = new Date().toISOString();\n    const newRow = [\n        newId,\n        customer.name,\n        customer.email,\n        customer.phone,\n        customer.address,\n        customer.notes,\n        timestamp,\n        timestamp\n    ];\n    await sheets.spreadsheets.values.append({\n        spreadsheetId,\n        range: \"customers!A:A\",\n        valueInputOption: \"USER_ENTERED\",\n        requestBody: {\n            values: [\n                newRow\n            ]\n        }\n    });\n}\nasync function updateCustomerInSheet(id, updates) {\n    const rowIndex = await findRowIndex(\"customers\", id);\n    const existingData = (await getSheetData(`customers!A${rowIndex}:H${rowIndex}`))[0];\n    const updatedRow = CUSTOMER_HEADERS.map((header, index)=>{\n        return header in updates ? updates[header] : existingData[index];\n    });\n    updatedRow[CUSTOMER_HEADERS.indexOf(\"updated_at\")] = new Date().toISOString();\n    await sheets.spreadsheets.values.update({\n        spreadsheetId,\n        range: `customers!A${rowIndex}`,\n        valueInputOption: \"USER_ENTERED\",\n        requestBody: {\n            values: [\n                updatedRow\n            ]\n        }\n    });\n}\nasync function deleteCustomerFromSheet(id) {\n    const sheetId = await getSheetIdByName(\"customers\");\n    if (sheetId === null) throw new Error(\"Hoja 'customers' no encontrada.\");\n    const rowIndex = await findRowIndex(\"customers\", id);\n    await sheets.spreadsheets.batchUpdate({\n        spreadsheetId,\n        requestBody: {\n            requests: [\n                {\n                    deleteDimension: {\n                        range: {\n                            sheetId,\n                            dimension: \"ROWS\",\n                            startIndex: rowIndex - 1,\n                            endIndex: rowIndex\n                        }\n                    }\n                }\n            ]\n        }\n    });\n}\n// --- API de Ventas ---\nconst SALES_HEADERS = [\n    \"id\",\n    \"sale_date\",\n    \"customer_id\",\n    \"customer_name\",\n    \"items\",\n    \"total_amount\",\n    \"notes\",\n    \"created_at\",\n    \"updated_at\"\n];\nconst SALES_RANGE = \"sales!A2:I\";\nasync function getSalesFromSheet() {\n    const rows = await getSheetData(SALES_RANGE);\n    const sales = rowsToObjects(rows, SALES_HEADERS);\n    return sales.map((s)=>({\n            ...s,\n            items: JSON.parse(s.items || \"[]\"),\n            total_amount: parseFloat(s.total_amount) || 0\n        }));\n}\nasync function addSaleToSheet(saleData) {\n    // 1. Agregar la venta a la hoja 'sales'\n    const newId = `sale_${new Date().getTime()}`;\n    const timestamp = new Date().toISOString();\n    const newRow = [\n        newId,\n        saleData.sale_date,\n        saleData.customer_id,\n        saleData.customer_name,\n        JSON.stringify(saleData.items),\n        saleData.total_amount,\n        saleData.notes,\n        timestamp,\n        timestamp\n    ];\n    await sheets.spreadsheets.values.append({\n        spreadsheetId,\n        range: \"sales!A:A\",\n        valueInputOption: \"USER_ENTERED\",\n        requestBody: {\n            values: [\n                newRow\n            ]\n        }\n    });\n    // 2. Actualizar el stock de cada producto vendido\n    const products = await getProductsFromSheet();\n    const productMap = new Map(products.map((p)=>[\n            p.sku,\n            p\n        ]));\n    for (const item of saleData.items){\n        const product = productMap.get(item.sku);\n        if (product) {\n            const newStock = product.stock - item.quantity;\n            if (newStock < 0) {\n                console.warn(`Alerta: La venta del producto ${item.sku} resultó en stock negativo (${newStock}).`);\n            }\n            // Encuentra la fila del producto por SKU para actualizarla.\n            const productRowIndex = await findRowIndexBySku(item.sku);\n            const stockColumnIndex = PRODUCT_HEADERS.indexOf(\"stock\");\n            const stockColumnLetter = String.fromCharCode(\"A\".charCodeAt(0) + stockColumnIndex);\n            await sheets.spreadsheets.values.update({\n                spreadsheetId,\n                range: `products!${stockColumnLetter}${productRowIndex}`,\n                valueInputOption: \"USER_ENTERED\",\n                requestBody: {\n                    values: [\n                        [\n                            newStock\n                        ]\n                    ]\n                }\n            });\n        } else {\n            console.error(`Error: No se encontró el producto con SKU ${item.sku} para actualizar el stock.`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1zRixtQkFBbUIzRSxnQkFBZ0JiLE9BQU8sQ0FBQztZQUNqRCxNQUFNeUYsb0JBQW9CQyxPQUFPQyxZQUFZLENBQUMsSUFBSUMsVUFBVSxDQUFDLEtBQUtKO1lBRWxFLE1BQU1qSCxPQUFPZSxZQUFZLENBQUNDLE1BQU0sQ0FBQ3VELE1BQU0sQ0FBQztnQkFDcENyRTtnQkFDQVcsT0FBTyxDQUFDLFNBQVMsRUFBRXFHLGtCQUFrQixFQUFFRixnQkFBZ0IsQ0FBQztnQkFDeERoRCxrQkFBa0I7Z0JBQ2xCQyxhQUFhO29CQUFFakQsUUFBUTt3QkFBQzs0QkFBQzRGO3lCQUFTO3FCQUFDO2dCQUFDO1lBQ3hDO1FBRUosT0FBTztZQUNIRSxRQUFRUSxLQUFLLENBQUMsQ0FBQywwQ0FBMEMsRUFBRVgsS0FBS2hGLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQztRQUNuRztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZXN0b3ItaW52ZW50YXJpby1uZXh0anMvLi9zcmMvbGliL2dvb2dsZVNoZWV0cy50cz8xYWU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdvb2dsZSB9IGZyb20gJ2dvb2dsZWFwaXMnO1xyXG5pbXBvcnQgeyBQcm9kdWN0LCBDdXN0b21lciwgU2FsZSwgU2FsZUl0ZW0gfSBmcm9tICdAL3R5cGVzJztcclxuXHJcbmlmICghcHJvY2Vzcy5lbnYuR09PR0xFX1NIRUVUU19TUFJFQURTSEVFVF9JRCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignRmFsdGEgR09PR0xFX1NIRUVUU19TUFJFQURTSEVFVF9JRCcpO1xyXG59XHJcbmlmICghcHJvY2Vzcy5lbnYuR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9FTUFJTCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignRmFsdGEgR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9FTUFJTCcpO1xyXG59XHJcbmlmICghcHJvY2Vzcy5lbnYuR09PR0xFX1BSSVZBVEVfS0VZKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdGYWx0YSBHT09HTEVfUFJJVkFURV9LRVknKTtcclxufVxyXG5cclxuY29uc3QgU1BSRUFEU0hFRVRfSUQgPSBwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1NQUkVBRFNIRUVUX0lEITtcclxuY29uc3QgU0VSVklDRV9FTUFJTCA9IHByb2Nlc3MuZW52LkdPT0dMRV9TRVJWSUNFX0FDQ09VTlRfRU1BSUwhO1xyXG5jb25zdCBQUklWQVRFX0tFWSA9IHByb2Nlc3MuZW52LkdPT0dMRV9QUklWQVRFX0tFWSEucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpO1xyXG5cclxuLy8gQ29uZmlndXJhY2nDs24gZGUgbGEgYXV0ZW50aWNhY2nDs25cclxuY29uc3QgYXV0aCA9IG5ldyBnb29nbGUuYXV0aC5Hb29nbGVBdXRoKHtcclxuICBjcmVkZW50aWFsczoge1xyXG4gICAgY2xpZW50X2VtYWlsOiBwcm9jZXNzLmVudi5HT09HTEVfU0VSVklDRV9BQ0NPVU5UX0VNQUlMLFxyXG4gICAgcHJpdmF0ZV9rZXk6IHByb2Nlc3MuZW52LkdPT0dMRV9QUklWQVRFX0tFWT8ucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpLFxyXG4gIH0sXHJcbiAgc2NvcGVzOiBbJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvc3ByZWFkc2hlZXRzJ10sXHJcbn0pO1xyXG5cclxuY29uc3Qgc2hlZXRzID0gZ29vZ2xlLnNoZWV0cyh7IHZlcnNpb246ICd2NCcsIGF1dGggfSk7XHJcbmNvbnN0IHNwcmVhZHNoZWV0SWQgPSBwcm9jZXNzLmVudi5HT09HTEVfU0hFRVRTX1NQUkVBRFNIRUVUX0lEO1xyXG5cclxuLy8gSGVscGVyIHBhcmEgY29udmVydGlyIGZpbGFzIGRlIFNoZWV0cyBhIG9iamV0b3NcclxuZnVuY3Rpb24gcm93c1RvT2JqZWN0czxUPihyb3dzOiBhbnlbXVtdLCBoZWFkZXJzOiBzdHJpbmdbXSk6IFRbXSB7XHJcbiAgcmV0dXJuIHJvd3MubWFwKHJvdyA9PiB7XHJcbiAgICBjb25zdCBvYmo6IGFueSA9IHt9O1xyXG4gICAgaGVhZGVycy5mb3JFYWNoKChoZWFkZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgIG9ialtoZWFkZXJdID0gcm93W2luZGV4XTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iaiBhcyBUO1xyXG4gIH0pO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRTaGVldERhdGEocmFuZ2U6IHN0cmluZykge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaGVldHMuc3ByZWFkc2hlZXRzLnZhbHVlcy5nZXQoe1xyXG4gICAgICAgIHNwcmVhZHNoZWV0SWQsXHJcbiAgICAgICAgcmFuZ2UsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXNwb25zZS5kYXRhLnZhbHVlcyB8fCBbXTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmluZFJvd0luZGV4KHNoZWV0TmFtZTogc3RyaW5nLCBpZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIGNvbnN0IGlkcyA9IChhd2FpdCBnZXRTaGVldERhdGEoYCR7c2hlZXROYW1lfSFBMjpBYCkpLmZsYXQoKTtcclxuICAgIGNvbnN0IHJvd0luZGV4ID0gaWRzLmluZGV4T2YoaWQpO1xyXG4gICAgaWYgKHJvd0luZGV4ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKGBJRCBubyBlbmNvbnRyYWRvIGVuIGxhIGhvamEgJHtzaGVldE5hbWV9OiAke2lkfWApO1xyXG4gICAgcmV0dXJuIHJvd0luZGV4ICsgMjsgLy8gKzIgcG9ycXVlIGVzIDEtYmFzZWQgeSBsYSBkYXRhIGVtcGllemEgZW4gbGEgZmlsYSAyXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZpbmRSb3dJbmRleEJ5U2t1KHNrdTogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcclxuICAgIGNvbnN0IHNrdXMgPSAoYXdhaXQgZ2V0U2hlZXREYXRhKCdwcm9kdWN0cyFCMjpCJykpLmZsYXQoKTtcclxuICAgIGNvbnN0IHJvd0luZGV4ID0gc2t1cy5maW5kSW5kZXgocyA9PiBzLnRvTG93ZXJDYXNlKCkgPT09IHNrdS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIGlmIChyb3dJbmRleCA9PT0gLTEpIHRocm93IG5ldyBFcnJvcihgU0tVIG5vIGVuY29udHJhZG86ICR7c2t1fWApO1xyXG4gICAgcmV0dXJuIHJvd0luZGV4ICsgMjtcclxufVxyXG5cclxuXHJcbi8vIEhlbHBlciBwYXJhIG9idGVuZXIgZWwgc2hlZXRJZCBwb3Igbm9tYnJlLCBuZWNlc2FyaW8gcGFyYSBib3JyYXIgZmlsYXNcclxuYXN5bmMgZnVuY3Rpb24gZ2V0U2hlZXRJZEJ5TmFtZShzaGVldE5hbWU6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaGVldHMuc3ByZWFkc2hlZXRzLmdldCh7IHNwcmVhZHNoZWV0SWQgfSk7XHJcbiAgICBjb25zdCBzaGVldCA9IHJlc3BvbnNlLmRhdGEuc2hlZXRzPy5maW5kKHMgPT4gcy5wcm9wZXJ0aWVzPy50aXRsZSA9PT0gc2hlZXROYW1lKTtcclxuICAgIHJldHVybiBzaGVldD8ucHJvcGVydGllcz8uc2hlZXRJZCA/PyBudWxsO1xyXG59XHJcblxyXG4vLyAtLS0gQVBJIGRlIFByb2R1Y3RvcyAtLS1cclxuY29uc3QgUFJPRFVDVF9IRUFERVJTID0gWydpZCcsJ3NrdScsJ25hbWUnLCdjYXRlZ29yeScsJ3RhZ3MnLCdkZXNjcmlwdGlvbicsJ2ltYWdlX3VybCcsJ3N1cHBsaWVyJywnY29zdCcsJ3ByaWNlJywnc3RvY2snLCdyZW9yZGVyX2xldmVsJywnbG9jYXRpb24nLCdjcmVhdGVkX2F0JywndXBkYXRlZF9hdCddO1xyXG5jb25zdCBQUk9EVUNUU19SQU5HRSA9ICdwcm9kdWN0cyFBMjpPJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0c0Zyb21TaGVldCgpOiBQcm9taXNlPFByb2R1Y3RbXT4ge1xyXG4gICAgY29uc3Qgcm93cyA9IGF3YWl0IGdldFNoZWV0RGF0YShQUk9EVUNUU19SQU5HRSk7XHJcbiAgICByZXR1cm4gcm93c1RvT2JqZWN0czxQcm9kdWN0Pihyb3dzLCBQUk9EVUNUX0hFQURFUlMpLm1hcChwID0+ICh7XHJcbiAgICAgICAgLi4ucCxcclxuICAgICAgICBjb3N0OiBwYXJzZUZsb2F0KHAuY29zdCBhcyBhbnkpIHx8IDAsXHJcbiAgICAgICAgcHJpY2U6IHBhcnNlRmxvYXQocC5wcmljZSBhcyBhbnkpIHx8IDAsXHJcbiAgICAgICAgc3RvY2s6IHBhcnNlSW50KHAuc3RvY2sgYXMgYW55LCAxMCkgfHwgMCxcclxuICAgICAgICByZW9yZGVyX2xldmVsOiBwYXJzZUludChwLnJlb3JkZXJfbGV2ZWwgYXMgYW55LCAxMCkgfHwgMCxcclxuICAgIH0pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByb2R1Y3RUb1NoZWV0KHByb2R1Y3Q6IE9taXQ8UHJvZHVjdCwgJ2lkJyB8ICdjcmVhdGVkX2F0JyB8ICd1cGRhdGVkX2F0Jz4pIHtcclxuICAgIGNvbnN0IG5ld0lkID0gYHByb2RfJHtuZXcgRGF0ZSgpLmdldFRpbWUoKX1gO1xyXG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbmV3Um93ID0gW1xyXG4gICAgICAgIG5ld0lkLCBwcm9kdWN0LnNrdSwgcHJvZHVjdC5uYW1lLCBwcm9kdWN0LmNhdGVnb3J5LCBwcm9kdWN0LnRhZ3MsIHByb2R1Y3QuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgcHJvZHVjdC5pbWFnZV91cmwsIHByb2R1Y3Quc3VwcGxpZXIsIHByb2R1Y3QuY29zdCwgcHJvZHVjdC5wcmljZSwgcHJvZHVjdC5zdG9jayxcclxuICAgICAgICBwcm9kdWN0LnJlb3JkZXJfbGV2ZWwsIHByb2R1Y3QubG9jYXRpb24sIHRpbWVzdGFtcCwgdGltZXN0YW1wXHJcbiAgICBdO1xyXG4gICAgYXdhaXQgc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMuYXBwZW5kKHtcclxuICAgICAgICBzcHJlYWRzaGVldElkLFxyXG4gICAgICAgIHJhbmdlOiAncHJvZHVjdHMhQTpBJyxcclxuICAgICAgICB2YWx1ZUlucHV0T3B0aW9uOiAnVVNFUl9FTlRFUkVEJyxcclxuICAgICAgICByZXF1ZXN0Qm9keToge1xyXG4gICAgICAgICAgICB2YWx1ZXM6IFtuZXdSb3ddLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3RJblNoZWV0KGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8UHJvZHVjdD4pIHtcclxuICAgIGNvbnN0IHJvd0luZGV4ID0gYXdhaXQgZmluZFJvd0luZGV4KCdwcm9kdWN0cycsIGlkKTtcclxuICAgIGNvbnN0IGV4aXN0aW5nRGF0YSA9IChhd2FpdCBnZXRTaGVldERhdGEoYHByb2R1Y3RzIUEke3Jvd0luZGV4fTpPJHtyb3dJbmRleH1gKSlbMF07XHJcbiAgICBcclxuICAgIGNvbnN0IHVwZGF0ZWRSb3cgPSBQUk9EVUNUX0hFQURFUlMubWFwKChoZWFkZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlciBpbiB1cGRhdGVzID8gKHVwZGF0ZXMgYXMgYW55KVtoZWFkZXJdIDogZXhpc3RpbmdEYXRhW2luZGV4XTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBBY3R1YWxpemFyIGB1cGRhdGVkX2F0YFxyXG4gICAgY29uc3QgdXBkYXRlZEF0SW5kZXggPSBQUk9EVUNUX0hFQURFUlMuaW5kZXhPZigndXBkYXRlZF9hdCcpO1xyXG4gICAgdXBkYXRlZFJvd1t1cGRhdGVkQXRJbmRleF0gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIGF3YWl0IHNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLnVwZGF0ZSh7XHJcbiAgICAgICAgc3ByZWFkc2hlZXRJZCxcclxuICAgICAgICByYW5nZTogYHByb2R1Y3RzIUEke3Jvd0luZGV4fWAsXHJcbiAgICAgICAgdmFsdWVJbnB1dE9wdGlvbjogJ1VTRVJfRU5URVJFRCcsXHJcbiAgICAgICAgcmVxdWVzdEJvZHk6IHsgdmFsdWVzOiBbdXBkYXRlZFJvd10gfSxcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUHJvZHVjdEZyb21TaGVldChpZDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBzaGVldElkID0gYXdhaXQgZ2V0U2hlZXRJZEJ5TmFtZSgncHJvZHVjdHMnKTtcclxuICAgIGlmIChzaGVldElkID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJIb2phICdwcm9kdWN0cycgbm8gZW5jb250cmFkYS5cIik7XHJcbiAgICBjb25zdCByb3dJbmRleCA9IGF3YWl0IGZpbmRSb3dJbmRleCgncHJvZHVjdHMnLCBpZCk7XHJcbiAgICBhd2FpdCBzaGVldHMuc3ByZWFkc2hlZXRzLmJhdGNoVXBkYXRlKHtcclxuICAgICAgICBzcHJlYWRzaGVldElkLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5OiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RzOiBbe1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlRGltZW5zaW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXRJZDogc2hlZXRJZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpbWVuc2lvbjogJ1JPV1MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydEluZGV4OiByb3dJbmRleCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZEluZGV4OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy8gLS0tIEFQSSBkZSBDbGllbnRlcyAtLS1cclxuY29uc3QgQ1VTVE9NRVJfSEVBREVSUyA9IFsnaWQnLCduYW1lJywnZW1haWwnLCdwaG9uZScsJ2FkZHJlc3MnLCdub3RlcycsJ2NyZWF0ZWRfYXQnLCd1cGRhdGVkX2F0J107XHJcbmNvbnN0IENVU1RPTUVSU19SQU5HRSA9ICdjdXN0b21lcnMhQTI6SCc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJzRnJvbVNoZWV0KCk6IFByb21pc2U8Q3VzdG9tZXJbXT4ge1xyXG4gICAgY29uc3Qgcm93cyA9IGF3YWl0IGdldFNoZWV0RGF0YShDVVNUT01FUlNfUkFOR0UpO1xyXG4gICAgcmV0dXJuIHJvd3NUb09iamVjdHM8Q3VzdG9tZXI+KHJvd3MsIENVU1RPTUVSX0hFQURFUlMpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ3VzdG9tZXJUb1NoZWV0KGN1c3RvbWVyOiBPbWl0PEN1c3RvbWVyLCAnaWQnIHwgJ2NyZWF0ZWRfYXQnIHwgJ3VwZGF0ZWRfYXQnPikge1xyXG4gICAgY29uc3QgbmV3SWQgPSBgY3VzdF8ke25ldyBEYXRlKCkuZ2V0VGltZSgpfWA7XHJcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBuZXdSb3cgPSBbXHJcbiAgICAgICAgbmV3SWQsIGN1c3RvbWVyLm5hbWUsIGN1c3RvbWVyLmVtYWlsLCBjdXN0b21lci5waG9uZSwgY3VzdG9tZXIuYWRkcmVzcyxcclxuICAgICAgICBjdXN0b21lci5ub3RlcywgdGltZXN0YW1wLCB0aW1lc3RhbXBcclxuICAgIF07XHJcbiAgICAgYXdhaXQgc2hlZXRzLnNwcmVhZHNoZWV0cy52YWx1ZXMuYXBwZW5kKHtcclxuICAgICAgICBzcHJlYWRzaGVldElkLFxyXG4gICAgICAgIHJhbmdlOiAnY3VzdG9tZXJzIUE6QScsXHJcbiAgICAgICAgdmFsdWVJbnB1dE9wdGlvbjogJ1VTRVJfRU5URVJFRCcsXHJcbiAgICAgICAgcmVxdWVzdEJvZHk6IHsgdmFsdWVzOiBbbmV3Um93XSB9LFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDdXN0b21lckluU2hlZXQoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxDdXN0b21lcj4pIHtcclxuICAgIGNvbnN0IHJvd0luZGV4ID0gYXdhaXQgZmluZFJvd0luZGV4KCdjdXN0b21lcnMnLCBpZCk7XHJcbiAgICBjb25zdCBleGlzdGluZ0RhdGEgPSAoYXdhaXQgZ2V0U2hlZXREYXRhKGBjdXN0b21lcnMhQSR7cm93SW5kZXh9Okgke3Jvd0luZGV4fWApKVswXTtcclxuICAgIFxyXG4gICAgY29uc3QgdXBkYXRlZFJvdyA9IENVU1RPTUVSX0hFQURFUlMubWFwKChoZWFkZXIsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlciBpbiB1cGRhdGVzID8gKHVwZGF0ZXMgYXMgYW55KVtoZWFkZXJdIDogZXhpc3RpbmdEYXRhW2luZGV4XTtcclxuICAgIH0pO1xyXG4gICAgdXBkYXRlZFJvd1tDVVNUT01FUl9IRUFERVJTLmluZGV4T2YoJ3VwZGF0ZWRfYXQnKV0gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBcclxuICAgIGF3YWl0IHNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLnVwZGF0ZSh7XHJcbiAgICAgICAgc3ByZWFkc2hlZXRJZCxcclxuICAgICAgICByYW5nZTogYGN1c3RvbWVycyFBJHtyb3dJbmRleH1gLFxyXG4gICAgICAgIHZhbHVlSW5wdXRPcHRpb246ICdVU0VSX0VOVEVSRUQnLFxyXG4gICAgICAgIHJlcXVlc3RCb2R5OiB7IHZhbHVlczogW3VwZGF0ZWRSb3ddIH0sXHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUN1c3RvbWVyRnJvbVNoZWV0KGlkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNoZWV0SWQgPSBhd2FpdCBnZXRTaGVldElkQnlOYW1lKCdjdXN0b21lcnMnKTtcclxuICAgIGlmIChzaGVldElkID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJIb2phICdjdXN0b21lcnMnIG5vIGVuY29udHJhZGEuXCIpO1xyXG4gICAgY29uc3Qgcm93SW5kZXggPSBhd2FpdCBmaW5kUm93SW5kZXgoJ2N1c3RvbWVycycsIGlkKTtcclxuICAgIFxyXG4gICAgYXdhaXQgc2hlZXRzLnNwcmVhZHNoZWV0cy5iYXRjaFVwZGF0ZSh7XHJcbiAgICAgICAgc3ByZWFkc2hlZXRJZCxcclxuICAgICAgICByZXF1ZXN0Qm9keTogeyByZXF1ZXN0czogW3tcclxuICAgICAgICAgICAgZGVsZXRlRGltZW5zaW9uOiB7XHJcbiAgICAgICAgICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNoZWV0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGltZW5zaW9uOiAnUk9XUycsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRJbmRleDogcm93SW5kZXggLSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZEluZGV4OiByb3dJbmRleCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfV19LFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIC0tLSBBUEkgZGUgVmVudGFzIC0tLVxyXG5jb25zdCBTQUxFU19IRUFERVJTID0gWydpZCcsICdzYWxlX2RhdGUnLCAnY3VzdG9tZXJfaWQnLCAnY3VzdG9tZXJfbmFtZScsICdpdGVtcycsICd0b3RhbF9hbW91bnQnLCAnbm90ZXMnLCAnY3JlYXRlZF9hdCcsICd1cGRhdGVkX2F0J107XHJcbmNvbnN0IFNBTEVTX1JBTkdFID0gJ3NhbGVzIUEyOkknO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNhbGVzRnJvbVNoZWV0KCk6IFByb21pc2U8U2FsZVtdPiB7XHJcbiAgICBjb25zdCByb3dzID0gYXdhaXQgZ2V0U2hlZXREYXRhKFNBTEVTX1JBTkdFKTtcclxuICAgIGNvbnN0IHNhbGVzID0gcm93c1RvT2JqZWN0czxhbnk+KHJvd3MsIFNBTEVTX0hFQURFUlMpO1xyXG4gICAgcmV0dXJuIHNhbGVzLm1hcChzID0+ICh7XHJcbiAgICAgICAgLi4ucyxcclxuICAgICAgICBpdGVtczogSlNPTi5wYXJzZShzLml0ZW1zIHx8ICdbXScpLFxyXG4gICAgICAgIHRvdGFsX2Ftb3VudDogcGFyc2VGbG9hdChzLnRvdGFsX2Ftb3VudCkgfHwgMCxcclxuICAgIH0pKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFNhbGVUb1NoZWV0KHNhbGVEYXRhOiBPbWl0PFNhbGUsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyAxLiBBZ3JlZ2FyIGxhIHZlbnRhIGEgbGEgaG9qYSAnc2FsZXMnXHJcbiAgICBjb25zdCBuZXdJZCA9IGBzYWxlXyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG5ld1JvdyA9IFtcclxuICAgICAgICBuZXdJZCxcclxuICAgICAgICBzYWxlRGF0YS5zYWxlX2RhdGUsXHJcbiAgICAgICAgc2FsZURhdGEuY3VzdG9tZXJfaWQsXHJcbiAgICAgICAgc2FsZURhdGEuY3VzdG9tZXJfbmFtZSxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeShzYWxlRGF0YS5pdGVtcyksXHJcbiAgICAgICAgc2FsZURhdGEudG90YWxfYW1vdW50LFxyXG4gICAgICAgIHNhbGVEYXRhLm5vdGVzLFxyXG4gICAgICAgIHRpbWVzdGFtcCxcclxuICAgICAgICB0aW1lc3RhbXAsXHJcbiAgICBdO1xyXG5cclxuICAgIGF3YWl0IHNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLmFwcGVuZCh7XHJcbiAgICAgICAgc3ByZWFkc2hlZXRJZCxcclxuICAgICAgICByYW5nZTogJ3NhbGVzIUE6QScsXHJcbiAgICAgICAgdmFsdWVJbnB1dE9wdGlvbjogJ1VTRVJfRU5URVJFRCcsXHJcbiAgICAgICAgcmVxdWVzdEJvZHk6IHsgdmFsdWVzOiBbbmV3Um93XSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gMi4gQWN0dWFsaXphciBlbCBzdG9jayBkZSBjYWRhIHByb2R1Y3RvIHZlbmRpZG9cclxuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgZ2V0UHJvZHVjdHNGcm9tU2hlZXQoKTtcclxuICAgIGNvbnN0IHByb2R1Y3RNYXAgPSBuZXcgTWFwKHByb2R1Y3RzLm1hcChwID0+IFtwLnNrdSwgcF0pKTtcclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHNhbGVEYXRhLml0ZW1zKSB7XHJcbiAgICAgICAgY29uc3QgcHJvZHVjdCA9IHByb2R1Y3RNYXAuZ2V0KGl0ZW0uc2t1KTtcclxuICAgICAgICBpZiAocHJvZHVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdTdG9jayA9IHByb2R1Y3Quc3RvY2sgLSBpdGVtLnF1YW50aXR5O1xyXG4gICAgICAgICAgICBpZiAobmV3U3RvY2sgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEFsZXJ0YTogTGEgdmVudGEgZGVsIHByb2R1Y3RvICR7aXRlbS5za3V9IHJlc3VsdMOzIGVuIHN0b2NrIG5lZ2F0aXZvICgke25ld1N0b2NrfSkuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRW5jdWVudHJhIGxhIGZpbGEgZGVsIHByb2R1Y3RvIHBvciBTS1UgcGFyYSBhY3R1YWxpemFybGEuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RSb3dJbmRleCA9IGF3YWl0IGZpbmRSb3dJbmRleEJ5U2t1KGl0ZW0uc2t1KTtcclxuICAgICAgICAgICAgY29uc3Qgc3RvY2tDb2x1bW5JbmRleCA9IFBST0RVQ1RfSEVBREVSUy5pbmRleE9mKCdzdG9jaycpO1xyXG4gICAgICAgICAgICBjb25zdCBzdG9ja0NvbHVtbkxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoJ0EnLmNoYXJDb2RlQXQoMCkgKyBzdG9ja0NvbHVtbkluZGV4KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IHNoZWV0cy5zcHJlYWRzaGVldHMudmFsdWVzLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzcHJlYWRzaGVldElkLFxyXG4gICAgICAgICAgICAgICAgcmFuZ2U6IGBwcm9kdWN0cyEke3N0b2NrQ29sdW1uTGV0dGVyfSR7cHJvZHVjdFJvd0luZGV4fWAsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZUlucHV0T3B0aW9uOiAnVVNFUl9FTlRFUkVEJyxcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RCb2R5OiB7IHZhbHVlczogW1tuZXdTdG9ja11dIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvcjogTm8gc2UgZW5jb250csOzIGVsIHByb2R1Y3RvIGNvbiBTS1UgJHtpdGVtLnNrdX0gcGFyYSBhY3R1YWxpemFyIGVsIHN0b2NrLmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJnb29nbGUiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX1NIRUVUU19TUFJFQURTSEVFVF9JRCIsIkVycm9yIiwiR09PR0xFX1NFUlZJQ0VfQUNDT1VOVF9FTUFJTCIsIkdPT0dMRV9QUklWQVRFX0tFWSIsIlNQUkVBRFNIRUVUX0lEIiwiU0VSVklDRV9FTUFJTCIsIlBSSVZBVEVfS0VZIiwicmVwbGFjZSIsImF1dGgiLCJHb29nbGVBdXRoIiwiY3JlZGVudGlhbHMiLCJjbGllbnRfZW1haWwiLCJwcml2YXRlX2tleSIsInNjb3BlcyIsInNoZWV0cyIsInZlcnNpb24iLCJzcHJlYWRzaGVldElkIiwicm93c1RvT2JqZWN0cyIsInJvd3MiLCJoZWFkZXJzIiwibWFwIiwicm93Iiwib2JqIiwiZm9yRWFjaCIsImhlYWRlciIsImluZGV4IiwiZ2V0U2hlZXREYXRhIiwicmFuZ2UiLCJyZXNwb25zZSIsInNwcmVhZHNoZWV0cyIsInZhbHVlcyIsImdldCIsImRhdGEiLCJmaW5kUm93SW5kZXgiLCJzaGVldE5hbWUiLCJpZCIsImlkcyIsImZsYXQiLCJyb3dJbmRleCIsImluZGV4T2YiLCJmaW5kUm93SW5kZXhCeVNrdSIsInNrdSIsInNrdXMiLCJmaW5kSW5kZXgiLCJzIiwidG9Mb3dlckNhc2UiLCJnZXRTaGVldElkQnlOYW1lIiwic2hlZXQiLCJmaW5kIiwicHJvcGVydGllcyIsInRpdGxlIiwic2hlZXRJZCIsIlBST0RVQ1RfSEVBREVSUyIsIlBST0RVQ1RTX1JBTkdFIiwiZ2V0UHJvZHVjdHNGcm9tU2hlZXQiLCJwIiwiY29zdCIsInBhcnNlRmxvYXQiLCJwcmljZSIsInN0b2NrIiwicGFyc2VJbnQiLCJyZW9yZGVyX2xldmVsIiwiYWRkUHJvZHVjdFRvU2hlZXQiLCJwcm9kdWN0IiwibmV3SWQiLCJEYXRlIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwibmV3Um93IiwibmFtZSIsImNhdGVnb3J5IiwidGFncyIsImRlc2NyaXB0aW9uIiwiaW1hZ2VfdXJsIiwic3VwcGxpZXIiLCJsb2NhdGlvbiIsImFwcGVuZCIsInZhbHVlSW5wdXRPcHRpb24iLCJyZXF1ZXN0Qm9keSIsInVwZGF0ZVByb2R1Y3RJblNoZWV0IiwidXBkYXRlcyIsImV4aXN0aW5nRGF0YSIsInVwZGF0ZWRSb3ciLCJ1cGRhdGVkQXRJbmRleCIsInVwZGF0ZSIsImRlbGV0ZVByb2R1Y3RGcm9tU2hlZXQiLCJiYXRjaFVwZGF0ZSIsInJlcXVlc3RzIiwiZGVsZXRlRGltZW5zaW9uIiwiZGltZW5zaW9uIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwiQ1VTVE9NRVJfSEVBREVSUyIsIkNVU1RPTUVSU19SQU5HRSIsImdldEN1c3RvbWVyc0Zyb21TaGVldCIsImFkZEN1c3RvbWVyVG9TaGVldCIsImN1c3RvbWVyIiwiZW1haWwiLCJwaG9uZSIsImFkZHJlc3MiLCJub3RlcyIsInVwZGF0ZUN1c3RvbWVySW5TaGVldCIsImRlbGV0ZUN1c3RvbWVyRnJvbVNoZWV0IiwiU0FMRVNfSEVBREVSUyIsIlNBTEVTX1JBTkdFIiwiZ2V0U2FsZXNGcm9tU2hlZXQiLCJzYWxlcyIsIml0ZW1zIiwiSlNPTiIsInBhcnNlIiwidG90YWxfYW1vdW50IiwiYWRkU2FsZVRvU2hlZXQiLCJzYWxlRGF0YSIsInNhbGVfZGF0ZSIsImN1c3RvbWVyX2lkIiwiY3VzdG9tZXJfbmFtZSIsInN0cmluZ2lmeSIsInByb2R1Y3RzIiwicHJvZHVjdE1hcCIsIk1hcCIsIml0ZW0iLCJuZXdTdG9jayIsInF1YW50aXR5IiwiY29uc29sZSIsIndhcm4iLCJwcm9kdWN0Um93SW5kZXgiLCJzdG9ja0NvbHVtbkluZGV4Iiwic3RvY2tDb2x1bW5MZXR0ZXIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/googleSheets.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/validators.ts":
/*!*******************************!*\
  !*** ./src/lib/validators.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customerSchema: () => (/* binding */ customerSchema),\n/* harmony export */   productSchema: () => (/* binding */ productSchema),\n/* harmony export */   saleItemSchema: () => (/* binding */ saleItemSchema),\n/* harmony export */   saleSchema: () => (/* binding */ saleSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\nconst productSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    sku: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"SKU es obligatorio.\"),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Nombre es obligatorio.\"),\n    category: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    tags: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    description: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    image_url: zod__WEBPACK_IMPORTED_MODULE_0__.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"\")),\n    supplier: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    cost: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0),\n    price: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0),\n    stock: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0),\n    reorder_level: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(0),\n    location: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst customerSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Nombre es obligatorio.\"),\n    email: zod__WEBPACK_IMPORTED_MODULE_0__.string().email().optional().or(zod__WEBPACK_IMPORTED_MODULE_0__.literal(\"\")),\n    phone: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    address: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\nconst saleItemSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    sku: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    quantity: zod__WEBPACK_IMPORTED_MODULE_0__.number().int().min(1, \"La cantidad debe ser al menos 1.\"),\n    price_at_sale: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0)\n});\nconst saleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    sale_date: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"La fecha es obligatoria.\"),\n    customer_id: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional(),\n    customer_name: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"El nombre del cliente es obligatorio.\"),\n    items: zod__WEBPACK_IMPORTED_MODULE_0__.array(saleItemSchema).min(1, \"La venta debe tener al menos un producto.\"),\n    total_amount: zod__WEBPACK_IMPORTED_MODULE_0__.number().min(0),\n    notes: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ZhbGlkYXRvcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFFakIsTUFBTUMsZ0JBQWdCRCx1Q0FBUSxDQUFDO0lBQ3BDRyxLQUFLSCx1Q0FBUSxHQUFHSyxHQUFHLENBQUMsR0FBRztJQUN2QkMsTUFBTU4sdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUc7SUFDeEJFLFVBQVVQLHVDQUFRLEdBQUdRLFFBQVE7SUFDN0JDLE1BQU1ULHVDQUFRLEdBQUdRLFFBQVE7SUFDekJFLGFBQWFWLHVDQUFRLEdBQUdRLFFBQVE7SUFDaENHLFdBQVdYLHVDQUFRLEdBQUdZLEdBQUcsR0FBR0osUUFBUSxHQUFHSyxFQUFFLENBQUNiLHdDQUFTLENBQUM7SUFDcERlLFVBQVVmLHVDQUFRLEdBQUdRLFFBQVE7SUFDN0JRLE1BQU1oQix1Q0FBUSxHQUFHSyxHQUFHLENBQUM7SUFDckJhLE9BQU9sQix1Q0FBUSxHQUFHSyxHQUFHLENBQUM7SUFDdEJjLE9BQU9uQix1Q0FBUSxHQUFHb0IsR0FBRyxHQUFHZixHQUFHLENBQUM7SUFDNUJnQixlQUFlckIsdUNBQVEsR0FBR29CLEdBQUcsR0FBR2YsR0FBRyxDQUFDO0lBQ3BDaUIsVUFBVXRCLHVDQUFRLEdBQUdRLFFBQVE7QUFDL0IsR0FBRztBQUVJLE1BQU1lLGlCQUFpQnZCLHVDQUFRLENBQUM7SUFDckNNLE1BQU1OLHVDQUFRLEdBQUdLLEdBQUcsQ0FBQyxHQUFHO0lBQ3hCbUIsT0FBT3hCLHVDQUFRLEdBQUd3QixLQUFLLEdBQUdoQixRQUFRLEdBQUdLLEVBQUUsQ0FBQ2Isd0NBQVMsQ0FBQztJQUNsRHlCLE9BQU96Qix1Q0FBUSxHQUFHUSxRQUFRO0lBQzFCa0IsU0FBUzFCLHVDQUFRLEdBQUdRLFFBQVE7SUFDNUJtQixPQUFPM0IsdUNBQVEsR0FBR1EsUUFBUTtBQUM1QixHQUFHO0FBRUksTUFBTW9CLGlCQUFpQjVCLHVDQUFRLENBQUM7SUFDbkNHLEtBQUtILHVDQUFRO0lBQ2JNLE1BQU1OLHVDQUFRO0lBQ2Q2QixVQUFVN0IsdUNBQVEsR0FBR29CLEdBQUcsR0FBR2YsR0FBRyxDQUFDLEdBQUc7SUFDbEN5QixlQUFlOUIsdUNBQVEsR0FBR0ssR0FBRyxDQUFDO0FBQ2xDLEdBQUc7QUFFSSxNQUFNMEIsYUFBYS9CLHVDQUFRLENBQUM7SUFDL0JnQyxXQUFXaEMsdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUc7SUFDN0I0QixhQUFhakMsdUNBQVEsR0FBR1EsUUFBUTtJQUNoQzBCLGVBQWVsQyx1Q0FBUSxHQUFHSyxHQUFHLENBQUMsR0FBRztJQUNqQzhCLE9BQU9uQyxzQ0FBTyxDQUFDNEIsZ0JBQWdCdkIsR0FBRyxDQUFDLEdBQUc7SUFDdENnQyxjQUFjckMsdUNBQVEsR0FBR0ssR0FBRyxDQUFDO0lBQzdCc0IsT0FBTzNCLHVDQUFRLEdBQUdRLFFBQVE7QUFDOUIsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL2dlc3Rvci1pbnZlbnRhcmlvLW5leHRqcy8uL3NyYy9saWIvdmFsaWRhdG9ycy50cz8yZDg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2R1Y3RTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgc2t1OiB6LnN0cmluZygpLm1pbigxLCAnU0tVIGVzIG9ibGlnYXRvcmlvLicpLFxyXG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEsICdOb21icmUgZXMgb2JsaWdhdG9yaW8uJyksXHJcbiAgY2F0ZWdvcnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICB0YWdzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBpbWFnZV91cmw6IHouc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKS5vcih6LmxpdGVyYWwoJycpKSxcclxuICBzdXBwbGllcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG4gIGNvc3Q6IHoubnVtYmVyKCkubWluKDApLFxyXG4gIHByaWNlOiB6Lm51bWJlcigpLm1pbigwKSxcclxuICBzdG9jazogei5udW1iZXIoKS5pbnQoKS5taW4oMCksXHJcbiAgcmVvcmRlcl9sZXZlbDogei5udW1iZXIoKS5pbnQoKS5taW4oMCksXHJcbiAgbG9jYXRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgY3VzdG9tZXJTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgJ05vbWJyZSBlcyBvYmxpZ2F0b3Jpby4nKSxcclxuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLm9wdGlvbmFsKCkub3Ioei5saXRlcmFsKCcnKSksXHJcbiAgcGhvbmU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxuICBhZGRyZXNzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgbm90ZXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3Qgc2FsZUl0ZW1TY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgICBza3U6IHouc3RyaW5nKCksXHJcbiAgICBuYW1lOiB6LnN0cmluZygpLFxyXG4gICAgcXVhbnRpdHk6IHoubnVtYmVyKCkuaW50KCkubWluKDEsICdMYSBjYW50aWRhZCBkZWJlIHNlciBhbCBtZW5vcyAxLicpLFxyXG4gICAgcHJpY2VfYXRfc2FsZTogei5udW1iZXIoKS5taW4oMCksXHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNhbGVTY2hlbWEgPSB6Lm9iamVjdCh7XHJcbiAgICBzYWxlX2RhdGU6IHouc3RyaW5nKCkubWluKDEsICdMYSBmZWNoYSBlcyBvYmxpZ2F0b3JpYS4nKSxcclxuICAgIGN1c3RvbWVyX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXHJcbiAgICBjdXN0b21lcl9uYW1lOiB6LnN0cmluZygpLm1pbigxLCAnRWwgbm9tYnJlIGRlbCBjbGllbnRlIGVzIG9ibGlnYXRvcmlvLicpLFxyXG4gICAgaXRlbXM6IHouYXJyYXkoc2FsZUl0ZW1TY2hlbWEpLm1pbigxLCAnTGEgdmVudGEgZGViZSB0ZW5lciBhbCBtZW5vcyB1biBwcm9kdWN0by4nKSxcclxuICAgIHRvdGFsX2Ftb3VudDogei5udW1iZXIoKS5taW4oMCksXHJcbiAgICBub3Rlczogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxyXG59KTsiXSwibmFtZXMiOlsieiIsInByb2R1Y3RTY2hlbWEiLCJvYmplY3QiLCJza3UiLCJzdHJpbmciLCJtaW4iLCJuYW1lIiwiY2F0ZWdvcnkiLCJvcHRpb25hbCIsInRhZ3MiLCJkZXNjcmlwdGlvbiIsImltYWdlX3VybCIsInVybCIsIm9yIiwibGl0ZXJhbCIsInN1cHBsaWVyIiwiY29zdCIsIm51bWJlciIsInByaWNlIiwic3RvY2siLCJpbnQiLCJyZW9yZGVyX2xldmVsIiwibG9jYXRpb24iLCJjdXN0b21lclNjaGVtYSIsImVtYWlsIiwicGhvbmUiLCJhZGRyZXNzIiwibm90ZXMiLCJzYWxlSXRlbVNjaGVtYSIsInF1YW50aXR5IiwicHJpY2VfYXRfc2FsZSIsInNhbGVTY2hlbWEiLCJzYWxlX2RhdGUiLCJjdXN0b21lcl9pZCIsImN1c3RvbWVyX25hbWUiLCJpdGVtcyIsImFycmF5IiwidG90YWxfYW1vdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/validators.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/googleapis","vendor-chunks/google-auth-library","vendor-chunks/tr46","vendor-chunks/zod","vendor-chunks/bignumber.js","vendor-chunks/node-fetch","vendor-chunks/googleapis-common","vendor-chunks/whatwg-url","vendor-chunks/gaxios","vendor-chunks/qs","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/object-inspect","vendor-chunks/gcp-metadata","vendor-chunks/debug","vendor-chunks/get-intrinsic","vendor-chunks/https-proxy-agent","vendor-chunks/gtoken","vendor-chunks/uuid","vendor-chunks/agent-base","vendor-chunks/jws","vendor-chunks/jwa","vendor-chunks/url-template","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/base64-js","vendor-chunks/side-channel-list","vendor-chunks/extend","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/side-channel-weakmap","vendor-chunks/has-symbols","vendor-chunks/function-bind","vendor-chunks/side-channel-map","vendor-chunks/safe-buffer","vendor-chunks/side-channel","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/buffer-equal-constant-time","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/call-bound","vendor-chunks/is-stream","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcustomers%2Froute&page=%2Fapi%2Fcustomers%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcustomers%2Froute.ts&appDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cewesk%5COneDrive%5CEscritorio%5Cgestor-de-inventario-para-decoraci%C3%B3n-github%5CApp-web-decoracion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();